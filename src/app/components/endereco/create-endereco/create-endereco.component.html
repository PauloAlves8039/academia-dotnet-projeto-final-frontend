<div class="container container-body">

  <h2 class="page-title">Cadastrar Endereço</h2>

  <hr>

  <div *ngIf="alertService.obterMensagem() !== null" [ngClass]="{
      'alert-success': alertService.obterResultadoSucesso(),
      'alert-danger': !alertService.obterResultadoSucesso(),
      'alert': true
    }" role="alert">
    {{ alertService.obterMensagem() }}
  </div>

  <div class="row mb-3 form-content">
    <div class="col-md-2 d-flex align-items-end">
      <label for="cep-pesquisado" class="form-label me-2">CEP<span>*</span></label>
      <input type="text"
             class="form-control"
             id="cep-pesquisado"
             name="cep-pesquisado"
             [(ngModel)]="cepPesquisado"
             maxlength="8"
             pattern="[0-9]{8}"
             required>
    </div>

    <div class="col-md-4 d-flex align-items-end">
      <button type="button" class="btn button-info button-form" (click)="pesquisarCep()" title="Pesquisar CEP">
        <i class="bi bi-search"></i> Pesquisar CEP
      </button>

      <button type="button" class="btn button-cancel button-form ms-2" (click)="limparCamposEndereco()" title="Cancelar Pesquisa">
        <i class="bi bi-x-square"></i> Cancelar
      </button>
    </div>
  </div>

  <hr>

  <form (ngSubmit)="cadastrarEndereco()" #enderecoForm="ngForm">

    <div class="row">
      <div class="col-sm-6">

        <div class="mb-2">
          <label for="logradouro" class="form-label">Logradouro<span>*</span></label>
          <input type="text"
                 class="form-control input-form-lg"
                 id="logradouro"
                 name="logradouro"
                 [(ngModel)]="novoEndereco.logradouro"
                 minlength="3"
                 required>
        </div>

        <div class="mb-2">
          <label for="numero" class="form-label">Número<span>*</span></label>
          <input type="text"
                 class="form-control input-form-sm"
                 id="numero"
                 name="numero"
                 [(ngModel)]="novoEndereco.numero"
                 minlength="1"
                 required>
        </div>

        <div class="mb-2">
          <label for="complemento" class="form-label">Complemento</label>
          <input type="text"
                 class="form-control"
                 id="complemento"
                 name="complemento"
                 [(ngModel)]="novoEndereco.complemento">
        </div>

        <div class="mb-2">
          <label for="bairro" class="form-label">Bairro<span>*</span></label>
          <input type="text"
                 class="form-control input-form-lg"
                 id="bairro"
                 name="bairro"
                 [(ngModel)]="novoEndereco.bairro"
                 minlength="3"
                 required>
        </div>

      </div>

      <div class="col-sm-6">

        <div class="mb-2">
          <label for="cidade" class="form-label">Cidade<span>*</span></label>
          <input type="text"
                 class="form-control input-form-lg"
                 id="cidade"
                 name="cidade"
                 [(ngModel)]="novoEndereco.cidade"
                 minlength="5"
                 required>
        </div>

        <div class="mb-2">
          <label for="estado" class="form-label">Estado<span>*</span></label>
          <input type="text"
                 class="form-control input-form-lg"
                 id="estado"
                 name="estado"
                 [(ngModel)]="novoEndereco.estado"
                 minlength="2"
                 required>
        </div>

        <div class="mb-2">
          <label for="cep" class="form-label">CEP Encontrado<span>*</span></label>
          <input type="text"
                 class="form-control input-form-sm-2"
                 id="cep"
                 name="cep"
                 [(ngModel)]="novoEndereco.cep"
                 [value]="novoEndereco.cep | formatoCep"
                 minlength="9"
                 required>
        </div>

      </div>
    </div>

    <hr>

    <div class="mt-2">
      <button type="submit" class="btn button-success button-form" [disabled]="!validarCamposObrigatorios()" title="Salvar">
        <i class="bi bi-floppy"></i> Salvar
      </button>
      <button type="button" class="btn button-cancel button-form ms-2" title="Cancelar"
        (click)="limparCamposEndereco()">
        <i class="bi bi-x-square"></i> Cancelar
      </button>
      <button type="button" class="btn button-info button-form ms-2" (click)="voltarParaListaEnderecos()" title="Lista de Endereços">
        <i class="bi bi-arrow-left-square"></i> Voltar
      </button>
    </div>

  </form>

</div>
